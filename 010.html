<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="1.css" />
    <title>Product Gift Box</title>
    <style>
      .gift-cell {
        width: 50px;
        height: 50px;
        border: 1px solid #ccc;
        display: inline-block;
        margin: 5px;
      }
    </style>
  </head>
  <body>
    <div id="app">
      <div class="step" id="step1">
        <h2>Choose Gift Box Size</h2>
        <img
          src="./image.png"
          alt="Small Gift Box"
          onclick="nextStep(1, '4')"
        />
        <img
          src="./image (1).png"
          alt="Medium Gift Box"
          onclick="nextStep(1, '6')"
        />
        <img
          src="./image (2).png"
          alt="Large Gift Box"
          onclick="nextStep(1, '9')"
        />
      </div>
      <div class="step" id="step2" style="display: none">
        <h2>Place Products in Gift Box</h2>
        <div id="giftBox" class="gift-box">
          <!-- Here will be dynamically inserted products in grid -->
        </div>
        <div class="product-selection products">
          <img
            class="products"
            src="./紅豆水饅頭1入.jpg"
            alt="Product A"
            onclick="addProduct('紅豆水饅頭1入.jpg')"
          />
          <img
            class="products"
            src="./經典原味1入.jpg"
            alt="Product B"
            onclick="addProduct('經典原味1入.jpg')"
          />
        </div>
        <button onclick="nextStep(2)">Next</button>
      </div>
      <div class="step" id="step3" style="display: none">
        <h2>Confirmation</h2>
        <p>Gift Box Size: <span id="giftBoxSize"></span></p>
        <p>
          Selected Products: <span id="confirmationSelectedProducts"></span>
        </p>
        <p>Total Price: $<span id="totalPrice"></span></p>
      </div>
    </div>

    <script>
      let selectedSize = '';
      let selectedProducts = [];
      const gridCells = {
        4: 4,
        6: 6,
        9: 9,
      };

      function nextStep(step, size = '') {
        if (step === 1) {
          selectedSize = size;
          document.getElementById('step1').style.display = 'none';
          document.getElementById('step2').style.display = 'block';

          let giftBoxImage;
          if (size === '4') {
            giftBoxImage = './image.png';
          } else if (size === '6') {
            giftBoxImage = './image (1).png';
          } else if (size === '9') {
            giftBoxImage = './image (2).png';
          }

          document.getElementById(
            'giftBox'
          ).innerHTML = `<img src="${giftBoxImage}" alt="Gift Box">`;

          updateGiftBoxContents(); // Update grid contents
        } else if (step === 2) {
          document.getElementById('step2').style.display = 'none';
          document.getElementById('step3').style.display = 'block';

          // Update confirmation details
          document.getElementById('giftBoxSize').textContent = selectedSize;
          document.getElementById('confirmationSelectedProducts').textContent =
            selectedProducts.join(', ');

          // Calculate and display total price
          const totalPrice = selectedProducts.length * 10; // Replace with your actual pricing logic
          document.getElementById('totalPrice').textContent = totalPrice;
        }
      }

      function addProduct(productName) {
        if (selectedProducts.length < gridCells[selectedSize]) {
          selectedProducts.push(productName);
          updateGiftBoxContents(); // Update grid contents
        } else {
          alert(
            `You can only add ${gridCells[selectedSize]} products for the selected gift box size.`
          );
        }
      }

      function updateGiftBoxContents() {
        let contents = '';
        for (let i = 0; i < gridCells[selectedSize]; i++) {
          const product = selectedProducts[i] || ''; // Check if product exists
          contents += `<div class="gift-cell"><img src="${product}" alt="${product}" style="width: 50px; height: 50px;"></div>`;
        }
        document.getElementById('giftBox').innerHTML = contents;
      }
    </script>
  </body>
</html>
